<!-- Bagian Atas / Hero -->
<section
  class="text-white py-5"
  style="
    background: linear-gradient(rgba(15, 23, 42, 0.75), rgba(15, 23, 42, 0.75)),
      url('https://www.smsperkasa.com/_next/image?url=https%3A%2F%2Fcpanel-blog.smsperkasa.com%2Fwp-content%2Fuploads%2F2024%2F09%2FDesain-Kamar-Tidur.png&w=3840&q=75');
    background-size: cover;
    background-position: center;
    background-repeat: no-repeat;
  "
>
  <div class="container py-5">
    <div class="row">
      <div class="col-lg-6">
        <h1 class="fw-bold display-5">
          Temukan Kos <br />
          <span style="color: #facc15">Impianmu</span>
        </h1>

        <p class="mt-3 text-light">
          Pilihan kos-kosan terbaik dengan fasilitas lengkap dan harga terjangkau di seluruh
          Indonesia
        </p>

        <!-- SEARCH BOX -->
        <div class="d-flex gap-2 bg-white rounded-3 p-2 mt-4" style="max-width: 600px">
          <input
            type="text"
            class="form-control border-0 flex-grow-1"
            placeholder="Masukkan lokasi (kota, area, kampus)"
            [(ngModel)]="searchQuery"
            name="searchQuery"
          />
          <button class="btn btn-success px-4 text-nowrap" (click)="onSearch()">
            <i class="bi bi-search me-1"></i>Cari Kos
          </button>
        </div>

        <!-- POPULER -->
        <div class="mt-3">
          <span class="me-2 text-light">Populer:</span>
          <button
            *ngFor="let city of cities"
            (click)="filterByCity(city)"
            [ngClass]="
              (city === 'Semua Lokasi' && selectedCity === 'all') ||
              (city !== 'Semua Lokasi' && selectedCity === city)
                ? 'badge bg-warning text-dark'
                : 'badge bg-secondary'
            "
            class="me-1"
            style="cursor: pointer; border: none; padding: 0.5rem 0.75rem"
          >
            {{ city }}
          </button>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- KOS POPULER -->
<section class="py-5">
  <div class="container">
    <div class="text-center mb-4">
      <h2 class="fw-bold">Kos Populer</h2>
      <p class="text-muted">
        Temukan berbagai pilihan kos dengan fasilitas terbaik di lokasi strategis
      </p>
    </div>

    <!-- Indicator: loading / empty -->
    <div *ngIf="isLoading" class="text-center py-5">
      <div class="spinner-border text-success" role="status">
        <span class="visually-hidden">Loading...</span>
      </div>
    </div>

    <!-- CARD LIHAT DETAIL-->
    <div class="row g-4" *ngIf="!isLoading && filteredKos && filteredKos.length > 0">
      <div class="col-md-4" *ngFor="let kos of filteredKos">
        <div class="card h-100 shadow-sm border-0">
          <img [src]="kos.image" class="card-img-top" alt="Kos Image" />
          <div class="card-body d-flex flex-column">
            <div class="d-flex justify-content-between mb-2">
              <span class="badge bg-warning text-dark">{{ kos.label }}</span>
              <span class="badge bg-light text-dark">{{ kos.rating }}</span>
            </div>
            <h6 class="fw-semibold">{{ kos.nama }}</h6>
            <p class="text-muted mb-1"><i class="bi bi-geo-alt"></i> {{ kos.lokasi }}</p>
            <p class="fw-bold text-success mb-3">{{ kos.harga }}</p>
            <a [routerLink]="['/detail', kos.id]" class="btn btn-outline-success w-100 mt-auto"
              >Lihat</a
            >
          </div>
        </div>
      </div>
    </div>

    <div
      *ngIf="!isLoading && (!filteredKos || filteredKos.length === 0)"
      class="text-center py-5 text-muted"
    >
      <p>Tidak ada data kos untuk ditampilkan.</p>
    </div>
  </div>
</section>
